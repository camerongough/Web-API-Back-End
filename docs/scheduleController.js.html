<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>scheduleController.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addMovie">addMovie</a></li><li><a href="global.html#addMovieSchedule">addMovieSchedule</a></li><li><a href="global.html#addToFavList">addToFavList</a></li><li><a href="global.html#addToWatchList">addToWatchList</a></li><li><a href="global.html#authorize">authorize</a></li><li><a href="global.html#createToken">createToken</a></li><li><a href="global.html#deleteMovie">deleteMovie</a></li><li><a href="global.html#deleteUser">deleteUser</a></li><li><a href="global.html#findMovieFromMovieDB">findMovieFromMovieDB</a></li><li><a href="global.html#findUserByEmail">findUserByEmail</a></li><li><a href="global.html#findUserById">findUserById</a></li><li><a href="global.html#forgotPassword">forgotPassword</a></li><li><a href="global.html#getFavList">getFavList</a></li><li><a href="global.html#getMovieDetailsFromMovieDB">getMovieDetailsFromMovieDB</a></li><li><a href="global.html#getWatchList">getWatchList</a></li><li><a href="global.html#isAdmin">isAdmin</a></li><li><a href="global.html#loginUser">loginUser</a></li><li><a href="global.html#logout">logout</a></li><li><a href="global.html#registerUser">registerUser</a></li><li><a href="global.html#removeFromFavList">removeFromFavList</a></li><li><a href="global.html#removeFromWatchList">removeFromWatchList</a></li><li><a href="global.html#showAllMovies">showAllMovies</a></li><li><a href="global.html#showAllSchedules">showAllSchedules</a></li><li><a href="global.html#showMovie">showMovie</a></li><li><a href="global.html#showMovieSchedule">showMovieSchedule</a></li><li><a href="global.html#updateMovie">updateMovie</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">scheduleController.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';
var mongoose = require('mongoose'),
	Schedule = mongoose.model('Schedule'),
	db = require('../../config/database'),
	config = require('../../config/config');

/**
* Add movie schedule
* @param {object} Schedule
* @return {object} schedule
* @throws {error} err
*/
exports.addMovieSchedule = function(req, res) {
	db.connect(config.database);
	var newSchedule = new Schedule(req.body);
	newSchedule
		.save()
		.then(function(schedule) {
			res.status(201).json({
				status: 'success',
				data: schedule,
				message: 'Added New Movie Schedule'
			});
		})
		.catch(function(err) {
			res.send(err);
		});
};

/**
* Show all movie schedules
* @returns {object} schedule
* @throws {error} err
*/
exports.showAllSchedules = function(req, res) {
	db.connect(config.database);
	Schedule.find(req.query)
		.then(function(schedule) {
			res.status(200).json({
				status: 'success',
				data: schedule,
				message: 'Retrieved All Movie Schedule'
			});
		})
		.catch(function(err) {
			res.send(err);
		});
};

/**
* Show move schedule
* @param {string} movieId
* @returns {object} movieSchedule
* @throws {error} err
*/
exports.showMovieSchedule = function(req, res) {
	//console.log(req.params.movieId);
	db.connect(config.database);
	Schedule.find({ movie_id: req.params.movieId }, function(err, movieSchedule) {
		if (err) res.send(err);

		res.status(200).json({
			status: 'status',
			schedule: movieSchedule,
			message: 'Retrieved Movie Schedule'
		});
	});
	// Schedule.find({movie_id: req.params.movieId})
	//   .then(function(shedule) {
	//     res.status(200).json({
	//       status: 'success',
	//       data: schedule,
	//       message: 'Retrieved Movie Schedule'
	//     });
	//   })
	//   .catch(function(err) {
	//     res.send(err);
	//   });
};
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Dec 12 2017 16:43:57 GMT+0000 (GMT) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
